!function(){"use strict";angular.module("ozas.datepicker",[])}(),function(){"use strict";function e(e){return{restrict:"A",scope:{clickOutsideClosest:"&",closestSelector:"@"},link:function(t,n,r){e.on("click",function(e){e.target.closest(t.closestSelector)||t.$apply(function(){t.$eval(t.clickOutsideClosest)})})}}}angular.module("ozas.datepicker").directive("clickOutsideClosest",e),e.$inject=["$document"]}(),angular.module("ozas.datepicker").run(["$templateCache",function(e){e.put("src/js/datepickerDirective/datepicker.html",'<div class="datepicker-component-block"\r\n     click-outside-closest="vm.datepickerOpened = false"\r\n     closest-selector=".datepicker-component-block">\r\n    <ng-transclude ng-click="vm.datepickerOpened = true"></ng-transclude>\r\n    <div class="datepicker-container"\r\n         ng-show="vm.datepickerOpened">\r\n        <time-selector date-model="vm.selectedDate" lang-config="vm.langConfig"></time-selector>\r\n        <div class="datepicker-date-board">\r\n            <div class="month-switcher-panel">\r\n                <span class="switcher-title">{{vm.currentDateTitle()}}</span>\r\n                <div class="button-left"\r\n                      ng-click="vm.switchPrevMonth()">\r\n                    <span class="arrow-left"></span>\r\n                </div>\r\n                <div class="button-right"\r\n                      ng-click="vm.switchNextMonth()">\r\n                    <span class="arrow-right"></span>\r\n                </div>\r\n            </div>\r\n            <div class="date-board-title-panel">\r\n                <div class="title-item"\r\n                     ng-repeat="title in vm.langConfig.days">{{title}}</div>\r\n            </div>\r\n            <div class="date-board-container">\r\n                <div class="date-board-item"\r\n                     ng-class="{\'selected\': $index === vm.selectedDateIndex, \'selectable\': date !== \'\'}"\r\n                     ng-click="vm.selectDate($index)"\r\n                     data-ng-repeat="date in vm.dateBoard track by $index">\r\n                    {{date}}\r\n                </div>\r\n            </div>\r\n            <div class="control-panel">\r\n                <span class="control-cancel" ng-click="vm.datepickerOpened = false">{{vm.langConfig.cancelString}}</span>\r\n                <div class="control-accept" ng-click="vm.acceptResultTime(); vm.datepickerOpened = false"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),e.put("src/js/timeSelectorComponent/timeSelector.html",'<div class="time-selector-block">\r\n    <div class="datepicker-heading-container">\r\n        <div class="date-field">{{vm.formatDateString()}}</div>\r\n        <div class="time-field">\r\n            <select ng-model="vm.hoursSelected" ng-change="vm.dateModel.setHours(+vm.hoursSelected)">\r\n                <option ng-repeat="hour in vm.hoursValues track by $index"\r\n                        value="{{$index}}">{{vm.formatTimeValue($index)}}</option>\r\n            </select>\r\n            <span>:</span>\r\n            <select ng-model="vm.minutesSelected" ng-change="vm.dateModel.setMinutes(+vm.minutesSelected)">\r\n                <option ng-repeat="hour in vm.minutesValue track by $index"\r\n                        value="{{$index}}">{{vm.formatTimeValue($index)}}</option>\r\n            </select>\r\n        </div>\r\n    </div>\r\n</div>\r\n')}]),function(){"use strict";function e(){return{templateUrl:"src/js/datepickerDirective/datepicker.html",transclude:!0,scope:{config:"="},link:t,controller:n,controllerAs:"vm",bindToController:!0}}function t(e,t,n,r){var a=angular.element(t[0].querySelector("input"));a.length||console.error("Datepicker error: no child input find."),e.$watch(function(){return r.datepickerOpened},function(e){e?a.addClass("datepicker-input-focus"):a.removeClass("datepicker-input-focus")}),e.setInputValue=function(e){a.val(e),a.triggerHandler("input"),a.triggerHandler("change")}}function n(e){function t(e){return new Date(e.getFullYear(),e.getMonth(),1)}function n(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function r(e){var t=e.getDay();return 0===t&&(t=7),t-1}function a(e){var t=e.getDay();return 0===t&&(t=7),7-t}function c(e){for(var c=[],i=0;i<r(t(e));i++)c[c.length]="";for(i=1;i<=n(e).getDate();i++)c[c.length]=i;for(i=0;i<a(n(e));i++)c[c.length]="";return c}function i(){v.setMonth(v.getMonth()+1),m.dateBoard=c(v),m.selectedDateIndex=o()}function l(){v.setMonth(v.getMonth()-1),m.dateBoard=c(v),m.selectedDateIndex=o()}function o(){return m.selectedDate?v.getFullYear()!=m.selectedDate.getFullYear()||v.getMonth()!=m.selectedDate.getMonth()?null:m.selectedDate.getDate()+r(t(m.selectedDate))-1:null}function s(e){""!==m.dateBoard[e]&&(m.selectedDate.setFullYear(v.getFullYear()),m.selectedDate.setMonth(v.getMonth()),m.selectedDate.setDate(m.dateBoard[e]),m.selectedDateIndex=e)}function d(){return m.langConfig.months[v.getMonth()]+" "+v.getFullYear()}function u(e){return e<10?"0"+e:e}function g(){var t=m.selectedDate.getDate()+" "+m.langConfig.monthsPartFormat[m.selectedDate.getMonth()]+" "+m.selectedDate.getFullYear()+", "+u(m.selectedDate.getHours())+":"+u(m.selectedDate.getMinutes());e.setInputValue(t)}var m=this,v=new Date;m.datepickerOpened=!1,m.dateBoard=c(v),m.selectedDateIndex=o(),m.selectedDate=new Date,m.langConfig={months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsPartFormat:["Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря"],days:["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],cancelString:"Отмена"},m.switchNextMonth=i,m.switchPrevMonth=l,m.selectDate=s,m.currentDateTitle=d,m.acceptResultTime=g,m.$onInit=function(){m.config&&(m.langConfig=m.config)}}angular.module("ozas.datepicker").directive("datepicker",e),e.$inject=[],n.$inject=["$scope"]}(),function(){"use strict";function e(){function e(e){return e<10?"0"+e:e}function t(){return n.dateModel.getDate()+" / "+n.langConfig.monthsPartFormat[n.dateModel.getMonth()]+" / "+n.dateModel.getFullYear()}var n=this;n.hoursValues=new Array(24),n.minutesValue=new Array(60),n.formatTimeValue=e,n.formatDateString=t,n.$onInit=function(){n.hoursSelected=n.dateModel.getHours().toString(),n.minutesSelected=n.dateModel.getMinutes().toString()}}angular.module("ozas.datepicker").component("timeSelector",{templateUrl:"src/js/timeSelectorComponent/timeSelector.html",bindings:{dateModel:"=",langConfig:"<"},controller:e,controllerAs:"vm"}),e.$inject=[]}();