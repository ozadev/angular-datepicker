!function(){"use strict";angular.module("ozas.datepicker",[])}(),function(){"use strict";function e(){return{template:a(),transclude:!0,scope:{config:"="},link:t,controller:n,controllerAs:"vm",bindToController:!0}}function t(e,t,n,a){var c=angular.element(t[0].querySelector("input"));c.length||console.error("Datepicker error: no child input find."),e.$watch(function(){return a.datepickerOpened},function(e){e?c.addClass("datepicker-input-focus"):c.removeClass("datepicker-input-focus")}),e.setInputValue=function(e){c.val(e),c.triggerHandler("input"),c.triggerHandler("change")}}function n(e){function t(e){return new Date(e.getFullYear(),e.getMonth(),1)}function n(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function a(e){var t=e.getDay();return 0===t&&(t=7),t-1}function c(e){var t=e.getDay();return 0===t&&(t=7),7-t}function i(e){for(var i=[],l=0;l<a(t(e));l++)i[i.length]="";for(l=1;l<=n(e).getDate();l++)i[i.length]=l;for(l=0;l<c(n(e));l++)i[i.length]="";return i}function l(){m.setMonth(m.getMonth()+1),v.dateBoard=i(m),v.selectedDateIndex=r()}function o(){m.setMonth(m.getMonth()-1),v.dateBoard=i(m),v.selectedDateIndex=r()}function r(){return v.selectedDate?m.getFullYear()!=v.selectedDate.getFullYear()||m.getMonth()!=v.selectedDate.getMonth()?null:v.selectedDate.getDate()+a(t(v.selectedDate))-1:null}function s(e){""!==v.dateBoard[e]&&(v.selectedDate.setFullYear(m.getFullYear()),v.selectedDate.setMonth(m.getMonth()),v.selectedDate.setDate(v.dateBoard[e]),v.selectedDateIndex=e)}function d(){return v.langConfig.months[m.getMonth()]+" "+m.getFullYear()}function u(e){return e<10?"0"+e:e}function g(){var t=v.selectedDate.getDate()+" "+v.langConfig.monthsPartFormat[v.selectedDate.getMonth()]+" "+v.selectedDate.getFullYear()+", "+u(v.selectedDate.getHours())+":"+u(v.selectedDate.getMinutes());e.setInputValue(t)}var v=this,m=new Date;v.datepickerOpened=!1,v.dateBoard=i(m),v.selectedDateIndex=r(),v.selectedDate=new Date,v.langConfig={months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsPartFormat:["Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря"],days:["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],cancelString:"Отмена"},v.switchNextMonth=l,v.switchPrevMonth=o,v.selectDate=s,v.currentDateTitle=d,v.acceptResultTime=g,v.$onInit=function(){v.config&&(v.langConfig=v.config)}}function a(){return['<div class="datepicker-component-block" click-outside-closest="vm.datepickerOpened = false" closest-selector=".datepicker-component-block">','<ng-transclude ng-click="vm.datepickerOpened = true"></ng-transclude>','<div class="datepicker-container" ng-show="vm.datepickerOpened">','<time-selector date-model="vm.selectedDate" lang-config="vm.langConfig"></time-selector>','<div class="datepicker-date-board">','<div class="month-switcher-panel">','<span class="switcher-title">{{vm.currentDateTitle()}}</span>','<div class="button-left" ng-click="vm.switchPrevMonth()">','<span class="arrow-left"></span>',"</div>",'<div class="button-right" ng-click="vm.switchNextMonth()">','<span class="arrow-right"></span>',"</div>","</div>",'<div class="date-board-title-panel">','<div class="title-item" ng-repeat="title in vm.langConfig.days">{{title}}</div>',"</div>",'<div class="date-board-container">','<div class="date-board-item" ng-class="{\'selected\': $index === vm.selectedDateIndex, \'selectable\': date !== \'\'}" ng-click="vm.selectDate($index)" data-ng-repeat="date in vm.dateBoard track by $index">',"{{date}}","</div>","</div>",'<div class="control-panel">','<span class="control-cancel" ng-click="vm.datepickerOpened = false">{{vm.langConfig.cancelString}}</span>','<div class="control-accept" ng-click="vm.acceptResultTime(); vm.datepickerOpened = false"></div>',"</div>","</div>","</div>","</div>"].join("")}angular.module("ozas.datepicker").directive("datepicker",e),e.$inject=[],n.$inject=["$scope"]}(),function(){"use strict";function e(){function e(e){return e<10?"0"+e:e}function t(){return n.dateModel.getDate()+" / "+n.langConfig.monthsPartFormat[n.dateModel.getMonth()]+" / "+n.dateModel.getFullYear()}var n=this;n.hoursValues=new Array(24),n.minutesValue=new Array(60),n.formatTimeValue=e,n.formatDateString=t,n.$onInit=function(){n.hoursSelected=n.dateModel.getHours().toString(),n.minutesSelected=n.dateModel.getMinutes().toString()}}angular.module("ozas.datepicker").component("timeSelector",{template:function(){return['<div class="time-selector-block">','<div class="datepicker-heading-container">','<div class="date-field">{{vm.formatDateString()}}</div>','<div class="time-field">','<select ng-model="vm.hoursSelected" ng-change="vm.dateModel.setHours(+vm.hoursSelected)">','<option ng-repeat="hour in vm.hoursValues track by $index" value="{{$index}}">{{vm.formatTimeValue($index)}}</option>',"</select>","<span>:</span>",'<select ng-model="vm.minutesSelected" ng-change="vm.dateModel.setMinutes(+vm.minutesSelected)">','<option ng-repeat="hour in vm.minutesValue track by $index" value="{{$index}}">{{vm.formatTimeValue($index)}}</option>',"</select>","</div>","</div>","</div>"].join("")}(),bindings:{dateModel:"=",langConfig:"<"},controller:e,controllerAs:"vm"}),e.$inject=[]}(),function(){"use strict";function e(e){return{restrict:"A",scope:{clickOutsideClosest:"&",closestSelector:"@"},link:function(t,n,a){e.on("click",function(e){e.target.closest(t.closestSelector)||t.$apply(function(){t.$eval(t.clickOutsideClosest)})})}}}angular.module("ozas.datepicker").directive("clickOutsideClosest",e),e.$inject=["$document"]}();